define("arrays",["exports"],function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];for(var n=new Array(t.length),r=0;r<t.length;r++)Object.defineProperty(n,r,{configurable:!1,writable:!1,enumerable:!0,value:t[r]});return n}Object.defineProperty(e,"__esModule",{value:!0}),e.createConstantArray=t}),define("View",["exports","jquery"],function(e,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=i(t),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.$el=(0,r["default"])(this.el=document.createElement(this.constructor.tagName||"div")),this.$el.addClass("view"),this.model=null,"undefined"!=typeof DEV_MODE&&(this.el.__view__=this)}return l(e,[{key:"isAttached",get:function(){return!!this.el&&!!this.el.parentNode}}]),l(e,[{key:"destroy",value:function(){this.el&&("__view__"in this.el&&(this.el.__view__=null),this.remove())}},{key:"$",value:function(){return this.$el.find.apply(this.$el,arguments)}},{key:"clear",value:function(){this.remove(),this.el.innerHTML="",this.model=null}},{key:"remove",value:function(){this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},{key:"template",value:function(){return""}},{key:"render",value:function(){this.el.innerHTML=this.template()}}]),e}();e["default"]=o,o.DESTROY_METHOD="destroy"}),define("BufferedListItemView",["exports","View"],function(e,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var o=i(t),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function d(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,i)}if("value"in n)return n.value;var l=n.get;if(void 0!==l)return l.call(i)},u=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.$el.addClass("item-view"),e}return l(t,e),s(t,[{key:"destroy",value:function(){a(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.indexInModelList=null,this.model=null,this.parentListView=null}},{key:"template",value:function(){return String(this.indexInModelList)}},{key:"onInitialize",value:function(e){var t=e.model,i=e.parentListView,n=e.indexInModelList;this.model=t,this.parentListView=i,this.indexInModelList=n,this.el.setAttribute("data-index",this.indexInModelList)}},{key:"onUpdate",value:function(e){this.indexInModelList=e.indexInModelList,this.el.setAttribute("data-index",this.indexInModelList)}}]),t}(o["default"]);e["default"]=u,u.tagName="li"}),define("BufferedListView",["exports","jquery","View","BufferedListItemView","arrays","klogger"],function(e,t,i,n,r,l){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var h=o(t),c=o(i),f=o(n),v=o(l),y=function(){function e(e,t){var i=[],n=!0,r=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(a){r=!0,l=a}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw l}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function M(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:M(r,t,i)}if("value"in n)return n.value;var l=n.get;if(void 0!==l)return l.call(i)},p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),m=new v["default"](v["default"].WARN),b=void 0,w=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=e.listContainerSelector,n=e.scrollerContainerSelector,l=e.listHeight,o=e.listItemHeight,s=e.idModelPropertyName,d=e.visibleOutboundItemsCount,c=e.ItemConstructor,f=e.models;a(this,t);var v=u(this,Object.getPrototypeOf(t).call(this));if(!b)throw"UndefinedEventManagerError: Please set by calling BufferedListView.setEventManager(eventManager : Object)";return h["default"].extend(v,b),Object.defineProperty(v,"_currentVisibleRange",{configurable:!0,writable:!1,value:(0,r.createConstantArray)(0,0)}),v.scrollPositionY=0,v.isRendered=!1,v.$listContainer=null,v.$scrollerContainer=null,v.listContainerSelector=i||".list-container:first > .list-display",v.scrollerContainerSelector=n||".list-container:first",v.listHeight=l||"auto",v.listHeightAutoMode="auto"===v.listHeight,v.listItemHeight=o,v.idModelPropertyName=s||"id",v.visibleOutboundItemsCount="number"!=typeof d?2:d,v.viewsMap=new Map,v.models=f||[],v.ItemConstructor=c||null,v._onWindowResize=v.onResize.bind(v),(0,h["default"])(window).on("resize",v._onWindowResize),v.listHeightAutoMode&&v.once("attach",function(){v.listHeight=v.queryListHeight(),v.isRendered&&(v.updateListScrollerHeight(),v.renderVisibleItems())}),v}return d(t,e),p(t,null,[{key:"setEventManager",value:function(e){b=e}},{key:"setLogLevel",value:function(e){e=e.toUpperCase(),e in v["default"]&&(m.loglevel=v["default"][e])}}]),p(t,[{key:"destroy",value:function(){m.debug("Destroying instance of BufferedListView"),(0,h["default"])(window).off("resize",this._onWindowResize),this.el&&"__view__"in this.el&&(this.el.__view__=null),g(Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.isRendered=!1,this.listContainerSelector=null,this.scrollerContainerSelector=null,this.scrollPositionY=0,this.listHeight=null,this.listHeightAutoMode=null,this.listItemHeight=null,this.idModelPropertyName=null,this.visibleOutboundItemsCount=null,this.models=null,this.ItemConstructor=null,this.viewsMap=null,this._onWindowResize=null,this.$listContainer=null,this.$scrollerContainer=null}},{key:"setModels",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.models=e,Object.defineProperty(this,"_currentVisibleRange",{configurable:!0,writable:!1,value:(0,r.createConstantArray)(-1,-1)}),this.updateListScrollerHeight(),this.renderVisibleItems()}},{key:"getItemConstructor",value:function(){return this.ItemConstructor||f["default"]}},{key:"template",value:function(){return'<div class="list-container"><div class="list-content"></div><ol class="list-display"></ol></div>'}},{key:"render",value:function(){this.renderBaseView(),this.isRendered=!0,this.$listContainer=this.$(this.listContainerSelector),this.$scrollerContainer=this.$(this.scrollerContainerSelector),this.$scrollerContainer.on("scroll",this.onScroll.bind(this)),this.isAttached&&(this.listHeightAutoMode&&(this.listHeight=this.queryListHeight()),this.updateListScrollerHeight(),this.renderVisibleItems())}},{key:"renderBaseView",value:function(){this.$el.html(this.template())}},{key:"attachTo",value:function(e){(0,h["default"])(e).append(this.$el),this.el.parentNode&&this.trigger("attach")}},{key:"scrollToIndex",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e*this.listItemHeight;t.animate?this.$scrollerContainer.animate({scrollTop:i},t.duration||300):this.$scrollerContainer.scrollTop(i)}},{key:"queryListHeight",value:function(){return this.$el.outerHeight()}},{key:"updateListScrollerHeight",value:function(){this.$scrollerContainer.find(".list-content").height(this.models.length*this.listItemHeight+"px")}},{key:"defineRangeOfModelsVisibles",value:function(){var e=Math.floor(this.scrollPositionY/this.listItemHeight),t=Math.ceil(this.listHeight/this.listItemHeight),i=Math.min(this.models.length-1,e+t);return[e,i]}},{key:"getRangeOfModels",value:function(e){var t=y(e,2),i=t[0],n=t[1];return this.models.slice(i,n)}},{key:"renderItemsRange",value:function(e){var i=this,n=y(e,2),l=n[0],o=n[1],s=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(s||this._currentVisibleRange[0]!==l||this._currentVisibleRange[1]!==o){var a=Math.max(0,l-this.visibleOutboundItemsCount),u=Math.min(this.models.length,o+this.visibleOutboundItemsCount),d=this.getRangeOfModels([a,u]),h=d.map(function(e,t){return i.getView(e,a+Number(t))});this.renderViews(h),Object.defineProperty(this,"_currentVisibleRange",{configurable:!0,writable:!1,value:(0,r.createConstantArray)(l,o)}),t.debugMode&&this.renderDebugInfos()}}},{key:"renderVisibleItems",value:function(e){this.renderItemsRange(this.defineRangeOfModelsVisibles(),e===!0)}},{key:"renderViews",value:function(e){var t=[].concat(s(this.viewsMap.values()));if(0===t.length)this.addViews(e);else{var i=t.filter(function(t){return!e.includes(t)}),n=e;this.removeViews(i),this.addViews(n)}}},{key:"getView",value:function(e,t){var i=this.viewsMap.get(e[this.idModelPropertyName]);if("undefined"==typeof this.idModelPropertyName)throw new Error("BufferedListView#idModelPropertyName must be defined");if("undefined"==typeof e[this.idModelPropertyName])throw new Error("The model."+this.idModelPropertyName+" is undefined. There is no chance to show more than one view.");return i?i.onUpdate({indexInModelList:t,parentListView:this,type:"update"}):(i=this.createView(e,t),this.viewsMap.set(e[this.idModelPropertyName],i),i.render()),i}},{key:"createView",value:function(e,t){var i=new(this.getItemConstructor());return i.onInitialize({type:"initialize",model:e,parentListView:this,indexInModelList:t}),i}},{key:"removeViews",value:function(e){for(var t=0;t<e.length;t++)this.removeView(e[t])}},{key:"removeView",value:function(e){this.viewsMap["delete"](e.model[this.idModelPropertyName]),e[this.getItemConstructor().DESTROY_METHOD](),e.parentListView=null,e.model=null}},{key:"addViews",value:function(e){for(var t=0;t<e.length;t++)this.addView(e[t],t)}},{key:"addView",value:function(e,t){var i=this.$listContainer,n=i.children(),r=this.listItemHeight*e.indexInModelList;e.el.style.top=String(r)+"px",n.length<=t?i.append(e.el):0===t?i.prepend(e.el):(0,h["default"])(i.children().get(t)).after(e.el)}},{key:"onResize",value:function(e){this._onResize(e),this.renderVisibleItems()}},{key:"onScroll",value:function(e){this._onScroll(e)}},{key:"_onResize",value:function(e){this.listHeightAutoMode&&(this.listHeight=this.queryListHeight())}},{key:"_onScroll",value:function(e){this.scrollPositionY=this.$scrollerContainer.scrollTop(),this.renderVisibleItems()}},{key:"toDebugInfos",value:function(){var e=this.defineRangeOfModelsVisibles(),t=y(e,2),i=t[0],n=t[1];return"Visible range: ("+i+", "+n+")\nVisible models: ("+Math.max(0,i-this.visibleOutboundItemsCount)+", "+Math.min(this.models.length-1,n+this.visibleOutboundItemsCount)+")"}},{key:"renderDebugInfos",value:function(){(0,h["default"])("#debug-container").html("<div>"+this.toDebugInfos().replace("\n","</div><div>")+"</div>")}}]),t}(c["default"]);e["default"]=w,w.VERSION="1.1.5",w.debugMode=!1,w.INSTANCE_PROPERTIES={_currentVisibleRange:null,isRendered:!1,listContainerSelector:null,scrollerContainerSelector:null,scrollPositionY:0,listHeight:null,listHeightAutoMode:null,listItemHeight:null,idModelPropertyName:null,visibleOutboundItemsCount:null,models:Array,ItemConstructor:null,viewsMap:Map,_onWindowResize:null,$listContainer:null,$scrollerContainer:null}});