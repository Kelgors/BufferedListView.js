define("arrays",["exports"],function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];for(var r=new Array(t.length),n=0;n<t.length;n++)Object.defineProperty(r,n,{configurable:!1,writable:!1,enumerable:!0,value:t[n]});return r}Object.defineProperty(e,"__esModule",{value:!0}),e.createConstantArray=t}),define("View",["exports","jquery","SafeObject"],function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=r(t),a=r(i),u=function h(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:h(n,t,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},c=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),d=function(e){function t(){n(this,t);var e=o(this,Object.getPrototypeOf(t).call(this));return e.$el=(0,l["default"])(e.el=document.createElement(e.constructor.tagName||"div")),e.$el.addClass("view"),e.el.__view__=e,e}return s(t,e),c(t,[{key:"isAttached",get:function(){return!!this.el&&!!this.el.parentNode}}]),c(t,[{key:"destroy",value:function(){this.el&&(this.el.__view__=null,this.remove()),u(Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"$",value:function(){return this.$el.find.apply(this.$el,arguments)}},{key:"clear",value:function(){this.remove(),this.el.innerHTML="",this.model=null}},{key:"remove",value:function(){this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},{key:"template",value:function(){return""}},{key:"render",value:function(){this.el.innerHTML=this.template()}}]),t}(a["default"]);e["default"]=d,d.INSTANCE_PROPERTIES=["el","$el","model"]}),define("BufferedListItemView",["exports","View"],function(e,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=i(t),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a=function(e){function t(){r(this,t);var e=n(this,Object.getPrototypeOf(t).call(this));return e.$el.addClass("item-view"),e}return o(t,e),l(t,[{key:"template",value:function(){return String(this.indexInModelList)}}]),t}(s["default"]);e["default"]=a,a.tagName="li",a.DESTROY_METHOD="destroy",a.INSTANCE_PROPERTIES=["indexInModelList"]}),define("BufferedListView",["exports","jquery","bullet","View","BufferedListItemView","arrays","KLogger"],function(e,t,i,r,n,o,s){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var d=l(t),h=l(i),f=l(r),v=l(n),y=l(s),g=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(a){n=!0,o=a}finally{try{!r&&l["return"]&&l["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),b=function _(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:_(n,t,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},m=new y["default"](y["default"].WARN),w=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=e.listContainerSelector,r=e.scrollerContainerSelector,n=e.listHeight,s=e.listItemHeight,l=e.idModelPropertyName,c=e.visibleOutboundItemsCount,f=e.ItemConstructor,v=e.models;a(this,t);var y=u(this,Object.getPrototypeOf(t).call(this));return d["default"].extend(y,h["default"]),Object.defineProperty(y,"_currentVisibleRange",{configurable:!0,writable:!1,value:(0,o.createConstantArray)(0,0)}),Object.defineProperty(t,"debugMode",{get:function(){return this._debugMode},set:function(e){e!==this._debugMode&&(this._debugMode=e,this.renderVisibleItems())}}),y.isRendered=!1,y.listContainerSelector=i||".list-container:first > .list-display",y.scrollerContainerSelector=r||".list-container:first",y.scrollPositionY=0,y.listHeight=n||"auto",y.listHeightAutoMode="auto"===y.listHeight,y.listItemHeight=s,y.idModelPropertyName=l||"id",y.visibleOutboundItemsCount="number"!=typeof c?2:c,y.models=v||[],y.ItemConstructor=f||null,y.viewsMap=new Map,y._onWindowResize=y.onResize.bind(y),(0,d["default"])(window).on("resize",y._onWindowResize),y.listHeightAutoMode&&y.once("attach",function(){y.listHeight=y.queryListHeight(),y.isRendered&&(y.updateListScrollerHeight(),y.renderVisibleItems())}),y}return c(t,e),p(t,[{key:"destroy",value:function(){m.debug("Destroying instance of BufferedListView"),(0,d["default"])(window).off("resize",this._onWindowResize),this.el&&delete this.el.__view__,b(Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"setModels",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.models=e,Object.defineProperty(this,"_currentVisibleRange",{configurable:!0,writable:!1,value:(0,o.createConstantArray)(-1,-1)}),this.updateListScrollerHeight(),this.renderVisibleItems()}},{key:"getItemConstructor",value:function(){return this.ItemConstructor||v["default"]}},{key:"template",value:function(){return'<div class="list-container"><div class="list-content"></div><ol class="list-display"></ol></div>'}},{key:"render",value:function(){this.$el.html(this.template()),this.isRendered=!0,this.$listContainer=this.$(this.listContainerSelector),this.$scrollerContainer=this.$(this.scrollerContainerSelector),this.$scrollerContainer.on("scroll",this.onScroll.bind(this)),this.isAttached&&(this.listHeightAutoMode&&(this.listHeight=this.queryListHeight()),this.updateListScrollerHeight(),this.renderVisibleItems())}},{key:"attachTo",value:function(e){(0,d["default"])(e).append(this.$el),this.el.parentNode&&this.trigger("attach")}},{key:"scrollToIndex",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e*this.listItemHeight;t.animate?this.$scrollerContainer.animate({scrollTop:i},t.duration||300):this.$scrollerContainer.scrollTop(i)}},{key:"queryListHeight",value:function(){return this.$el.outerHeight()}},{key:"updateListScrollerHeight",value:function(){this.$scrollerContainer.find(".list-content").height(this.models.length*this.listItemHeight+"px")}},{key:"defineRangeOfModelsVisibles",value:function(){var e=Math.floor(this.scrollPositionY/this.listItemHeight),t=Math.ceil(this.listHeight/this.listItemHeight),i=Math.min(this.models.length-1,e+t);return[e,i]}},{key:"renderItemsRange",value:function(e){var t=this,i=g(e,2),r=i[0],n=i[1];if(this._currentVisibleRange[0]!==r||this._currentVisibleRange[1]!==n){var s=Math.max(0,r-this.visibleOutboundItemsCount),l=Math.min(this.models.length,n+this.visibleOutboundItemsCount),a=this.models.slice(s,l),u=a.map(function(e,i){var r=t.getView(e,s+Number(i));return r.el.setAttribute("data-index",r.indexInModelList),r});this.renderViews(u),Object.defineProperty(this,"_currentVisibleRange",{configurable:!0,writable:!1,value:(0,o.createConstantArray)(r,n)}),this.debugMode&&this.renderDebugInfos()}}},{key:"renderVisibleItems",value:function(){this.renderItemsRange(this.defineRangeOfModelsVisibles())}},{key:"renderViews",value:function(e){var t=this.$listContainer.children().toArray().map(function(e){return e.__view__});if(0===t.length)this.addViews(e);else{var i=t.filter(function(t){return!e.includes(t)}),r=e;this.removeViews(i),this.addViews(r)}}},{key:"getView",value:function(e,t){var i=this.viewsMap.get(e[this.idModelPropertyName]);if("undefined"==typeof this.idModelPropertyName)throw new Error("BufferedListView#idModelPropertyName must be defined");if("undefined"==typeof e[this.idModelPropertyName])throw new Error("The model."+this.idModelPropertyName+" is undefined. There is no chance to show more than one view.");return i?i.model!==e&&(i.model=e,i.render()):(i=this.createView(e,t),this.viewsMap.set(e[this.idModelPropertyName],i)),i.indexInModelList=t,i}},{key:"createView",value:function(e,t){var i=new(this.getItemConstructor());return i.model=e,i.indexInModelList=t,i.render(),i}},{key:"removeViews",value:function(e){for(var t=0;t<e.length;t++)this.removeView(e[t])}},{key:"removeView",value:function(e){this.viewsMap["delete"](e.model[this.idModelPropertyName]),e[this.getItemConstructor().DESTROY_METHOD]()}},{key:"addViews",value:function(e){for(var t=0;t<e.length;t++)this.addView(e[t],t)}},{key:"addView",value:function(e,t){var i=this.$listContainer,r=i.children(),n=this.listItemHeight*e.indexInModelList;e.el.style.top=String(n)+"px",r.length<=t?i.append(e.el):0===t?i.prepend(e.el):(0,d["default"])(i.children().get(t)).after(e.el)}},{key:"onResize",value:function(e){this._onResize(e),this.renderVisibleItems()}},{key:"onScroll",value:function(e){this._onScroll(e)}},{key:"_onResize",value:function(e){this.listHeightAutoMode&&(this.listHeight=this.queryListHeight())}},{key:"_onScroll",value:function(e){this.scrollPositionY=this.$scrollerContainer.scrollTop(),this.renderVisibleItems()}},{key:"toDebugInfos",value:function(){var e=this.defineRangeOfModelsVisibles(),t=g(e,2),i=t[0],r=t[1];return"Visible range: ("+i+", "+r+")\nVisible models: ("+Math.max(0,i-this.visibleOutboundItemsCount)+", "+Math.min(this.models.length-1,r+this.visibleOutboundItemsCount)+")"}},{key:"renderDebugInfos",value:function(){(0,d["default"])("#debug-container").html("<div>"+this.toDebugInfos().replace("\n","</div><div>")+"</div>")}}]),t}(f["default"]);e["default"]=w,w.INSTANCE_PROPERTIES=(0,o.createConstantArray)("_errors","events","_getMappings","on","once","off","replaceCallback","replaceAllCallbacks","trigger","addEventName","removeEventName","getStrictMode","setStrictMode","getTriggerAsync","setTriggerAsync","_currentVisibleRange","isRendered","listContainerSelector","scrollerContainerSelector","scrollPositionY","listHeight","listHeightAutoMode","listItemHeight","idModelPropertyName","visibleOutboundItemsCount","models","ItemConstructor","viewsMap","_onWindowResize","$listContainer","$scrollerContainer"),w.setLogLevel=function(e){e=e.toUpperCase(),e in y["default"]&&(m.loglevel=y["default"][e])}});